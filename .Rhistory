ggplot() +
geom_point(
data = bay_asthma_pm_tract,
aes(
x = PM2.5,
y = Asthma
)
) +
labs(
title = "Asthma x PM 2.5 Scatter Plot"
) +
geom_point() +
geom_smooth(method = "lm")
ggplot() +
geom_point(
data = bay_asthma_pm_tract,
aes(
x = PM2.5,
y = Asthma
)
) +
labs(
title = "Asthma x PM 2.5 Scatter Plot"
) +
#geom_point() +
geom_smooth(method = "lm")
ggplot(
data = bay_asthma_pm_tract,
aes(
x = PM2.5,
y = Asthma
)) +
geom_point ()
+
labs(
title = "Asthma x PM 2.5 Scatter Plot"
) +
geom_smooth(method = "lm")
ggplot(
data = bay_asthma_pm_tract,
aes(
x = PM2.5,
y = Asthma
)) +
geom_point() +
labs(
title = "Asthma x PM 2.5 Scatter Plot"
) +
geom_smooth(method = "lm")
bay_asthma_pm_tract <-
ces4_map %>%
filter(
!is.na(Asthma),
!is.na(PM2.5)
)
ggplot(
data = bay_asthma_pm_tract,
aes(
x = PM2.5,
y = Asthma
)) +
geom_point() +
labs(
title = "Asthma x PM 2.5 Scatter Plot"
) +
geom_smooth(method = "lm")
model <- lm(Asthma ~ PM2.5, bay_asthma_pm_tract)
summary(model)
plot(density(residuals(model)))
model <- lm(Asthma ~ PM2.5, bay_asthma_pm_tract)
summary(model)
model_log <- lm(log(Asthma) ~ PM2.5, bay_asthma_pm_tract)
summary(model_log)
plot(density(residuals(model_log)))
ggplot(
data = bay_asthma_pm_tract,
aes(
x = PM2.5,
y = log(Asthma)
)) +
geom_point() +
labs(
title = "Asthma x PM 2.5 Scatter Plot LOG"
) +
geom_smooth(method = "lm")
plot(density(residuals(model_log)))
ggplot(
data = bay_asthma_pm_tract,
aes(
x = PM2.5,
y = log(Asthma)
)) +
geom_point() +
labs(
title = "Asthma x PM 2.5 Scatter Plot LOG"
) +
geom_smooth(method = "lm")
ggplot(
data = bay_asthma_pm_tract,
aes(
x = log(PM2.5),
y = log(Asthma)
)) +
geom_point() +
labs(
title = "Asthma x PM 2.5 Scatter Plot LOG"
) +
geom_smooth(method = "lm")
ggplot(
data = bay_asthma_pm_tract,
aes(
x = PM2.5,
y = log(Asthma)
)) +
geom_point() +
labs(
title = "Asthma x PM 2.5 Scatter Plot LOG"
) +
geom_smooth(method = "lm")
View(model)
View(model)
model <- lm(Asthma ~ PM2.5, bay_asthma_pm_tract)
summary(model)
plot(density(residuals(model)))
model <- lm(Asthma ~ PM2.5, bay_asthma_pm_tract)
model <- lm(Asthma ~ PM2.5, bay_asthma_pm_tract)
summary(model)
print(residuals(model))
residuals <-
bay_asthma_pm_tract %>%
mutate(
residuals = residuals(model)
)
residuals_pal <- colorNumeric(
palette = "Reds",
domain = residuals$residuals
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = residuals,
fillColor = ~residuals_pal(residuals),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~Residuals
)
View(residuals)
View(residuals)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = residuals,
fillColor = ~residuals_pal(residuals),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~residuals
)
leaflet() %>%
#addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = residuals,
fillColor = ~residuals_pal(residuals),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~residuals
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = residuals,
fillColor = ~residuals_pal(residuals),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~residuals
)
data_with_residuals <-
bay_asthma_pm_tract %>%
mutate(
Residuals = residuals(model)
)
residuals_pal <- colorNumeric(
palette = "Reds",
domain = data_with_residuals$Residuals
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = data_with_residuals,
fillColor = ~residuals_pal(Residuals),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~Residuals
)
rm(residuals)
?leaflet
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = data_with_residuals,
fillColor = ~residuals_pal(Residuals),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~Residuals
)
data_with_residuals <-
bay_asthma_pm_tract %>%
mutate(
Residuals = residuals(model_log)
)
residuals_pal <- colorNumeric(
palette = "Reds",
domain = data_with_residuals$Residuals
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = data_with_residuals,
fillColor = ~residuals_pal(Residuals),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~Residuals
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_asthma,
fillColor = ~asthma_pal(Asthma),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~Asthma,
label = ~paste0(
round(Asthma),
"Asthma"
),
)
ces4_bay_asthma <-
ces4_clean %>%
filter(`California County` %in% bay_county_names) %>%
select(`Census Tract`, Asthma) %>%
left_join(
ca_tracts %>%
transmute(GEOID = as.numeric(GEOID)),
by = c("Census Tract" = "GEOID")
) %>%
st_as_sf()
asthma_pal <- colorNumeric(
palette = "Reds",
domain = ces4_bay_asthma$Asthma
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_asthma,
fillColor = ~asthma_pal(Asthma),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~Asthma,
label = ~paste0(
round(Asthma),
"Asthma"
),
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_asthma,
fillColor = ~asthma_pal(Asthma),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~Asthma,
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_asthma,
fillColor = ~asthma_pal(Asthma),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~Asthma(
round(Asthma),
"% households without air-conditioning making less than $100K"
),
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_asthma,
fillColor = ~asthma_pal(Asthma),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~Asthma(
round(asthma_pal),
"% households without air-conditioning making less than $100K"
),
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_asthma,
fillColor = ~asthma_pal(Asthma),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~Asthma(
#round(asthma_pal),
"% households without air-conditioning making less than $100K"
),
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_asthma,
fillColor = ~asthma_pal(Asthma),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~Asthma(),
)
ces4_bay_asthma <-
ces4_clean %>%
filter(`California County` %in% bay_county_names) %>%
select(`Census Tract`, Asthma) %>%
left_join(
ca_tracts %>%
transmute(GEOID = as.numeric(GEOID)),
by = c("Census Tract" = "GEOID")
) %>%
st_as_sf()
asthma_pal <- colorNumeric(
palette = "Reds",
domain = ces4_bay_asthma$Asthma
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_asthma,
fillColor = ~asthma_pal(Asthma),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~Asthma(),
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_asthma,
fillColor = ~asthma_pal(Asthma),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~Asthma
)
ggplot(
data = bay_asthma_pm_tract,
aes(
x = PM2.5,
y = Asthma
)) +
geom_point() +
labs(
title = "Asthma x PM 2.5 Scatter Plot"
) +
geom_smooth(method = "lm")
model <- lm(Asthma ~ PM2.5, bay_asthma_pm_tract)
summary(model)
plot(density(residuals(model)))
print(residuals(model))
model <- lm(Asthma ~ PM2.5, bay_asthma_pm_tract)
summary(model)
plot(density(residuals(model)))
#log
ggplot(
data = bay_asthma_pm_tract,
aes(
x = PM2.5,
y = log(Asthma)
)) +
geom_point() +
labs(
title = "Asthma x PM 2.5 Scatter Plot LOG"
) +
geom_smooth(method = "lm")
model_log <- lm(log(Asthma) ~ PM2.5, bay_asthma_pm_tract)
summary(model_log)
plot(density(residuals(model_log)))
ggplot(
data = bay_asthma_pm_tract,
aes(
x = PM2.5,
y = log(Asthma)
)) +
geom_point() +
labs(
title = "Asthma x PM 2.5 Scatter Plot LOG"
) +
geom_smooth(method = "lm")
summary(model_log)
summary(model)
summary(model_log)
ggplot(
data = bay_asthma_pm_tract,
aes(
x = PM2.5,
y = log(Asthma)
)) +
geom_point() +
labs(
title = "Asthma x PM 2.5 Scatter Plot LOG"
) +
geom_smooth(method = "lm")
plot(density(residuals(model_log)))
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = data_with_residuals,
fillColor = ~residuals_pal(Residuals),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~Residuals
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_pm25,
fillColor = ~pm25_pal(PM2.5),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~PM2.5(
"PM2.5"
)
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_pm25,
fillColor = ~pm25_pal(PM2.5),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~paste0(
"PM2.5"
)
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_pm25,
fillColor = ~pm25_pal(PM2.5),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = PM2.5
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_pm25,
fillColor = ~pm25_pal(PM2.5),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = PM2.5
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_pm25,
fillColor = ~pm25_pal(PM2.5),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~paste0(
"PM2.5"
)
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_pm25,
fillColor = ~pm25_pal(PM2.5),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = ~paste0(
PM2.5,
"PM2.5"
)
)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolygons(
data = ces4_bay_pm25,
fillColor = ~pm25_pal(PM2.5),
color = "white",
weight = 0.5,
fillOpacity = 0.5,
label = PM2.5
)
